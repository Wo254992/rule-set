# ==============================================
# OpenClash ä¼˜åŒ–é…ç½®æ–‡ä»¶
# ä¼˜åŒ–é‡ç‚¹ï¼šæ€§èƒ½ã€ç¨³å®šæ€§ã€DNSã€è§„åˆ™åŒ¹é…
# ==============================================

# ==================== åŸºç¡€è®¾ç½® ====================
mixed-port: 7890
redir-port: 7891
tproxy-port: 1536
ipv6: true
mode: Rule
allow-lan: true
bind-address: "*"
disable-keep-alive: false
geodata-mode: true
geo-auto-update: true
geo-update-interval: 24
geox-url:
  geoip: "https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"
  asn: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"

# ==================== å®éªŒæ€§åŠŸèƒ½ ====================
experimental:
  http-headers:
    request:
      - name: "User-Agent"
        value: "Mozilla/5.0 (Linux; Android 13; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Mobile Safari/537.36"
      - name: "Accept-Language"
        value: "zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"

# ==================== æ€§èƒ½ä¼˜åŒ– ====================
unified-delay: true
tcp-concurrent: true
keep-alive-interval: 30
log-level: info
find-process-mode: always
global-client-fingerprint: chrome
geodata-loader: standard

# ==================== æ§åˆ¶é¢æ¿ ====================
external-controller: 0.0.0.0:9090
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"
external-ui: "./ui"
secret: ""

# ==================== èŠ‚ç‚¹è®°å¿† ====================
profile:
  store-selected: true
  store-fake-ip: true

# ==================== å—…æ¢æ¨¡å— ====================
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 5228, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
    - "+.google.com"
    - "+.netflix.com"
  skip-domain:
    - "Mijia Cloud"
    - "+.apple.com"

# ==================== TUN æ¨¡å— ====================
tun:
  enable: true
  device: utun
  stack: mixed
  dns-hijack:
    - any:53
    - tcp://any:53
  mtu: 9000
  udp-timeout: 300
  auto-route: true
  strict-route: true
  auto-redirect: true
  auto-detect-interface: true
  exclude-package: []

# ==================== DNS æ¨¡å— ====================
dns:
  enable: true
  ipv6: true
  prefer-h3: true
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - "*.localdomain"
    - "*.example"
    - "*.invalid"
    - "*.localhost"
    - "*.test"
    - "*.local"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.3gppnetwork.org"
    - "+.xtracloud.net"
    - "+.market.xiaomi.com"
    - "+.ntp.org.cn"
    - "+.pool.ntp.org"
    - "RULE-SET:Private_åŸŸ"
    - "RULE-SET:GoogleFCM_åŸŸ"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - system
  nameserver:
    - https://doh.pub/dns-query#h3=true
    - https://dns.alidns.com/dns-query#h3=true
  proxy-server-nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  nameserver-policy:
    "geosite:cn,private,apple-cn":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
    "geosite:geolocation-!cn":
      - https://dns.google/dns-query#h3=true
      - https://cloudflare-dns.com/dns-query#h3=true
  fallback:
    - https://dns.google/dns-query#h3=true
    - https://cloudflare-dns.com/dns-query#h3=true
    - tls://8.8.8.8
  fallback-filter:
    geoip: true
    geoip-code: CN
    geosite:
      - gfw
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
    domain:
      - "+.google.com"
      - "+.facebook.com"
      - "+.youtube.com"

# ==================== è®¢é˜…é…ç½®é”šç‚¹ ====================
p: &p
  type: http
  interval: 86400
  health-check:
    enable: true
    url: https://www.gstatic.com/generate_204
    interval: 300
    timeout: 5000
    lazy: true
  proxy: è®¢é˜…æ›´æ–°
  override:
    skip-cert-verify: false
    udp: true

# ==================== ä»£ç†æä¾›è€… ====================
proxy-providers:
  1.ä¸»è¦åœ°å€:
    <<: *p
    override:
      additional-prefix: "Main|"
    path: ./proxies/1.ä¸»è¦åœ°å€.yaml
    url: "è®¢é˜…é“¾æ¥1"

  2.å¤‡ç”¨åœ°å€:
    <<: *p
    override:
      additional-prefix: "Minor|"
    path: ./proxies/2.å¤‡ç”¨åœ°å€.yaml
    url: "è®¢é˜…é“¾æ¥2"

  3.é¢å¤–åœ°å€:
    <<: *p
    override:
      additional-prefix: "Extra|"
    path: ./proxies/3.é¢å¤–åœ°å€.yaml
    url: "è®¢é˜…é“¾æ¥3"

# ==================== å†…ç½®ä»£ç† ====================
proxies:
  - {name: ğŸŒ ç›´è¿, type: direct, udp: true}
  - {name: â›”ï¸ æ‹¦æˆª, type: reject}
  - {name: ğŸŒ DNSåŠ«æŒ, type: dns}

# ==================== ä»£ç†ç»„é”šç‚¹ ====================
A: &A
  filter: "^(?!.*(å¥—é¤|é‡ç½®|å‰©ä½™|åˆ°æœŸ|è®¢é˜…|ç¾¤|è´¦æˆ·|æµé‡|æœ‰æ•ˆæœŸ|æ—¶é—´|å®˜ç½‘|å¤±è”|ä½™é¢|è¿‡æœŸ)).*$"
  use:
    - 1.ä¸»è¦åœ°å€
    - 2.å¤‡ç”¨åœ°å€
    - 3.é¢å¤–åœ°å€

proxy_groups_template: &proxy_groups_template
  type: select
  proxies:
    - ğŸš€ æ€»æ¨¡å¼
    - âš¡ï¸ è‡ªåŠ¨é€‰æ‹©
    - ğŸ”„ è´Ÿè½½å‡è¡¡
    - ğŸ›¡ï¸ æ•…éšœè½¬ç§»
    - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    - ğŸŒ å…¶å®ƒåœ°åŒº
    - ğŸŒ ç›´è¿
    - â›”ï¸ æ‹¦æˆª
  <<: *A

# ==================== ä»£ç†ç»„ ====================
proxy-groups:
  - name: ğŸš€ æ€»æ¨¡å¼
    type: select
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/adjust.svg"
    proxies:
      - âš¡ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ”„ è´Ÿè½½å‡è¡¡
      - ğŸ›¡ï¸ æ•…éšœè½¬ç§»
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸŒ å…¶å®ƒåœ°åŒº
      - ğŸŒ ç›´è¿

  - name: è®¢é˜…æ›´æ–°
    type: select
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/link.svg"
    proxies:
      - ğŸŒ ç›´è¿
      - ğŸš€ æ€»æ¨¡å¼

  # ==================== è‡ªåŠ¨ç­–ç•¥ç»„ ====================
  - name: âš¡ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/speed.svg"
    tolerance: 50
    timeout: 5000
    interval: 300
    lazy: true
    <<: *A

  - name: ğŸ”„ è´Ÿè½½å‡è¡¡
    type: load-balance
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/balance.svg"
    strategy: consistent-hashing
    interval: 300
    lazy: true
    timeout: 5000
    <<: *A

  - name: ğŸ›¡ï¸ æ•…éšœè½¬ç§»
    type: fallback
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/fallback.svg"
    interval: 300
    lazy: true
    timeout: 5000
    <<: *A

  # ==================== åœ°åŒºèŠ‚ç‚¹ç»„ ====================
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/flags/hk.svg"
    tolerance: 50
    interval: 300
    lazy: true
    filter: "^(?=.*(æ¸¯|HK|(?i)Hong))(?!.*(å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
    use:
      - 1.ä¸»è¦åœ°å€
      - 2.å¤‡ç”¨åœ°å€
      - 3.é¢å¤–åœ°å€

  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/flags/tw.svg"
    tolerance: 50
    interval: 300
    lazy: true
    filter: "^(?=.*(å°|TW|(?i)Taiwan))(?!.*(å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
    use:
      - 1.ä¸»è¦åœ°å€
      - 2.å¤‡ç”¨åœ°å€
      - 3.é¢å¤–åœ°å€

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/flags/jp.svg"
    tolerance: 50
    interval: 300
    lazy: true
    filter: "^(?=.*(æ—¥|JP|(?i)Japan))(?!.*(å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
    use:
      - 1.ä¸»è¦åœ°å€
      - 2.å¤‡ç”¨åœ°å€
      - 3.é¢å¤–åœ°å€

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    type: url-test
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/flags/us.svg"
    tolerance: 100
    interval: 300
    lazy: true
    filter: "^(?=.*(ç¾|US|(?i)States|American))(?!.*(å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
    use:
      - 1.ä¸»è¦åœ°å€
      - 2.å¤‡ç”¨åœ°å€
      - 3.é¢å¤–åœ°å€

  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    type: url-test
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/flags/sg.svg"
    tolerance: 50
    interval: 300
    lazy: true
    filter: "^(?=.*(æ–°|ç‹®|ç…|SG|(?i)Singapore))(?!.*(å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
    use:
      - 1.ä¸»è¦åœ°å€
      - 2.å¤‡ç”¨åœ°å€
      - 3.é¢å¤–åœ°å€

  - name: ğŸŒ å…¶å®ƒåœ°åŒº
    type: select
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/global.svg"
    filter: "^(?!.*(æ¸¯|HK|Hong|å°|TW|Taiwan|æ—¥|JP|Japan|ç¾|US|States|æ–°|ç‹®|ç…|SG|Singapore|å¥—é¤|é‡ç½®|å‰©ä½™|åˆ°æœŸ|è®¢é˜…|ç¾¤|è´¦æˆ·|æµé‡|å®˜ç½‘)).*$"
    use:
      - 1.ä¸»è¦åœ°å€
      - 2.å¤‡ç”¨åœ°å€
      - 3.é¢å¤–åœ°å€

  # ==================== åº”ç”¨åˆ†æµç»„ ====================
  - name: ğŸ“± å°çº¢ä¹¦
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/xiaohongshu.svg"

  - name: ğŸ“± æŠ–éŸ³
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/douyin.svg"

  - name: ğŸ“º å“”å“©å“”å“©
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/bilibili.svg"

  - name: ğŸ® Steam
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/steam.svg"

  - name: ğŸ Apple
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/apple.svg"

  - name: ğŸªŸ Microsoft
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/microsoft.svg"

  - name: âœˆï¸ Telegram
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/telegram.svg"

  - name: ğŸ¬ Emby
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/emby.svg"

  - name: ğŸ’¬ Discord
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/discord.svg"

  - name: ğŸµ Spotify
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/spotify.svg"

  - name: ğŸµ TikTok
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/tiktok.svg"

  - name: ğŸ“¹ YouTube
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/youtube.svg"

  - name: ğŸ¬ Netflix
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/netflix.svg"

  - name: ğŸ” Google
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/google.svg"

  - name: ğŸ“² GoogleFCM
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/google.svg"

  - name: ğŸ“˜ Facebook
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/facebook.svg"

  - name: ğŸ¤– OpenAI
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/openai.svg"

  - name: ğŸ™ GitHub
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/github.svg"

  - name: ğŸ¦ Twitter(X)
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/twitter.svg"

  - name: ğŸŒ DNSè¿æ¥
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/dns.svg"

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    <<: *proxy_groups_template
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/fish.svg"

  - name: ğŸ›¡ï¸ å¹¿å‘Šæ‹¦æˆª
    type: select
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/bug.svg"
    proxies:
      - REJECT-DROP
      - REJECT
      - â›”ï¸ æ‹¦æˆª
      - PASS
      - ğŸŒ DNSåŠ«æŒ

  - name: ğŸ”’ WebRTC
    type: select
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/shield.svg"
    proxies:
      - REJECT-DROP
      - REJECT
      - â›”ï¸ æ‹¦æˆª
      - PASS

  - name: ğŸ“ ç‰¹æ®Šåœ°å€
    type: select
    icon: "https://cdn.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/link.svg"
    proxies:
      - ğŸŒ ç›´è¿
      - â›”ï¸ æ‹¦æˆª

# ==================== è§„åˆ™é›†é”šç‚¹ ====================
rule-anchor:
  Classical: &Classical
    type: http
    behavior: classical
    format: text
    interval: 86400
  Domain: &Domain
    type: http
    behavior: domain
    format: mrs
    interval: 86400
  IPCIDR: &IPCIDR
    type: http
    behavior: ipcidr
    format: mrs
    interval: 86400

# ==================== è§„åˆ™é›† ====================
rule-providers:
  è‡ªå®šä¹‰è§„åˆ™:
    type: file
    behavior: classical
    format: text
    path: ./rules/è‡ªå®šä¹‰è§„åˆ™.list

  WebRTC_è§„åˆ™:
    <<: *Classical
    path: ./rules/WebRTC.list
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/rules/WebRTC.list"

  direct_åŸŸ:
    <<: *Classical
    path: ./rules/direct.list
    url: "https://raw.githubusercontent.com/Wo254992/rule-set/refs/heads/main/Direct.list"

  Emby_åŸŸ:
    <<: *Classical
    path: ./rules/Emby.list
    url: "https://raw.githubusercontent.com/Wo254992/rule-set/refs/heads/main/userEmby.list"

  CN_IP:
    <<: *IPCIDR
    path: ./rules/CN_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/cn.mrs"

  CN_åŸŸ:
    <<: *Domain
    path: ./rules/CN_åŸŸ.mrs
    url: "https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/cn.mrs"

  å¹¿å‘Šæ‹¦æˆª:
    <<: *Domain
    path: ./rules/anti-ad.mrs
    url: "https://anti-ad.net/mihomo.mrs"

  XiaoHongShu_åŸŸ:
    <<: *Domain
    path: ./rules/XiaoHongShu.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/XiaoHongShu/XiaoHongShu_OCD_Domain.mrs"

  DouYin_åŸŸ:
    <<: *Domain
    path: ./rules/DouYin.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/DouYin/DouYin_OCD_Domain.mrs"

  BiliBili_åŸŸ:
    <<: *Domain
    path: ./rules/BiliBili.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/BiliBili/BiliBili_OCD_Domain.mrs"

  BiliBili_IP:
    <<: *IPCIDR
    path: ./rules/BiliBili_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/BiliBili/BiliBili_OCD_IP.mrs"

  Steam_åŸŸ:
    <<: *Domain
    path: ./rules/Steam.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Steam/Steam_OCD_Domain.mrs"

  TikTok_åŸŸ:
    <<: *Domain
    path: ./rules/TikTok.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/TikTok/TikTok_OCD_Domain.mrs"

  Spotify_åŸŸ:
    <<: *Domain
    path: ./rules/Spotify.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Spotify/Spotify_OCD_Domain.mrs"

  Spotify_IP:
    <<: *IPCIDR
    path: ./rules/Spotify_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Spotify/Spotify_OCD_IP.mrs"

  Facebook_åŸŸ:
    <<: *Domain
    path: ./rules/Facebook.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Facebook/Facebook_OCD_Domain.mrs"

  Facebook_IP:
    <<: *IPCIDR
    path: ./rules/Facebook_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Facebook/Facebook_OCD_IP.mrs"

  Telegram_åŸŸ:
    <<: *Domain
    path: ./rules/Telegram.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Telegram/Telegram_OCD_Domain.mrs"

  Telegram_IP:
    <<: *IPCIDR
    path: ./rules/Telegram_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Telegram/Telegram_OCD_IP.mrs"

  YouTube_åŸŸ:
    <<: *Domain
    path: ./rules/YouTube.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/YouTube/YouTube_OCD_Domain.mrs"

  YouTube_IP:
    <<: *IPCIDR
    path: ./rules/YouTube_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/YouTube/YouTube_OCD_IP.mrs"

  Google_åŸŸ:
    <<: *Domain
    path: ./rules/Google.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Google/Google_OCD_Domain.mrs"

  Google_IP:
    <<: *IPCIDR
    path: ./rules/Google_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Google/Google_OCD_IP.mrs"

  GoogleFCM_åŸŸ:
    <<: *Domain
    path: ./rules/GoogleFCM.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/GoogleFCM/GoogleFCM_OCD_Domain.mrs"

  GoogleFCM_IP:
    <<: *IPCIDR
    path: ./rules/GoogleFCM_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/GoogleFCM/GoogleFCM_OCD_IP.mrs"

  Microsoft_åŸŸ:
    <<: *Domain
    path: ./rules/Microsoft.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Microsoft/Microsoft_OCD_Domain.mrs"

  Apple_åŸŸ:
    <<: *Domain
    path: ./rules/Apple.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Apple/Apple_OCD_Domain.mrs"

  Apple_IP:
    <<: *IPCIDR
    path: ./rules/Apple_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Apple/Apple_OCD_IP.mrs"

  OpenAI_åŸŸ:
    <<: *Domain
    path: ./rules/OpenAI.mrs
    url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/ai.mrs"

  OpenAI_IP:
    <<: *IPCIDR
    path: ./rules/OpenAI_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/OpenAI/OpenAI_OCD_IP.mrs"

  Netflix_åŸŸ:
    <<: *Domain
    path: ./rules/Netflix.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Netflix/Netflix_OCD_Domain.mrs"

  Netflix_IP:
    <<: *IPCIDR
    path: ./rules/Netflix_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Netflix/Netflix_OCD_IP.mrs"

  Discord_åŸŸ:
    <<: *Domain
    path: ./rules/Discord.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Discord/Discord_OCD_Domain.mrs"

  GitHub_åŸŸ:
    <<: *Domain
    path: ./rules/GitHub.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/GitHub/GitHub_OCD_Domain.mrs"

  Twitter_åŸŸ:
    <<: *Domain
    path: ./rules/Twitter.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Twitter/Twitter_OCD_Domain.mrs"

  Twitter_IP:
    <<: *IPCIDR
    path: ./rules/Twitter_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Twitter/Twitter_OCD_IP.mrs"

  Private_åŸŸ:
    <<: *Domain
    path: ./rules/LAN.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Lan/Lan_OCD_Domain.mrs"

  Private_IP:
    <<: *IPCIDR
    path: ./rules/Private_IP.mrs
    url: "https://cdn.jsdelivr.net/gh/GitMetaio/rule@master/rule/Clash/Lan/Lan_OCD_IP.mrs"

# ==================== è§„åˆ™ ====================
rules:
  # DNS åŠ«æŒ
  - DST-PORT,53,ğŸŒ DNSåŠ«æŒ
  - DST-PORT,853,ğŸŒ DNSè¿æ¥

  # è‡ªå®šä¹‰è§„åˆ™ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
  - RULE-SET,è‡ªå®šä¹‰è§„åˆ™,ğŸ“ ç‰¹æ®Šåœ°å€

  # ç›´è¿è§„åˆ™
  - RULE-SET,direct_åŸŸ,ğŸŒ ç›´è¿

  # å¹¿å‘Šæ‹¦æˆªå’Œ WebRTC
  - RULE-SET,WebRTC_è§„åˆ™,ğŸ”’ WebRTC
  - RULE-SET,å¹¿å‘Šæ‹¦æˆª,ğŸ›¡ï¸ å¹¿å‘Šæ‹¦æˆª

  # Emby
  - RULE-SET,Emby_åŸŸ,ğŸ¬ Emby

  # å›½å†…åº”ç”¨
  - PROCESS-NAME,com.ss.android.ugc.aweme,ğŸ“± æŠ–éŸ³
  - RULE-SET,DouYin_åŸŸ,ğŸ“± æŠ–éŸ³

  - PROCESS-NAME,com.xingin.xhs,ğŸ“± å°çº¢ä¹¦
  - RULE-SET,XiaoHongShu_åŸŸ,ğŸ“± å°çº¢ä¹¦

  - PROCESS-NAME,tv.danmaku.bili,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,BiliBili_åŸŸ,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,BiliBili_IP,ğŸ“º å“”å“©å“”å“©,no-resolve

  # æ¸¸æˆå¹³å°
  - RULE-SET,Steam_åŸŸ,ğŸ® Steam

  # å›½é™…åº”ç”¨
  - RULE-SET,TikTok_åŸŸ,ğŸµ TikTok

  - RULE-SET,YouTube_åŸŸ,ğŸ“¹ YouTube
  - RULE-SET,YouTube_IP,ğŸ“¹ YouTube,no-resolve

  - RULE-SET,Netflix_åŸŸ,ğŸ¬ Netflix
  - RULE-SET,Netflix_IP,ğŸ¬ Netflix,no-resolve

  - RULE-SET,Spotify_åŸŸ,ğŸµ Spotify
  - RULE-SET,Spotify_IP,ğŸµ Spotify,no-resolve

  - RULE-SET,Discord_åŸŸ,ğŸ’¬ Discord

  - RULE-SET,Facebook_åŸŸ,ğŸ“˜ Facebook
  - RULE-SET,Facebook_IP,ğŸ“˜ Facebook,no-resolve

  - RULE-SET,Twitter_åŸŸ,ğŸ¦ Twitter(X)
  - RULE-SET,Twitter_IP,ğŸ¦ Twitter(X),no-resolve

  - RULE-SET,Telegram_åŸŸ,âœˆï¸ Telegram
  - RULE-SET,Telegram_IP,âœˆï¸ Telegram,no-resolve

  # Google ç³»åˆ—
  - DOMAIN-KEYWORD,mtalk.google,ğŸ“² GoogleFCM
  - RULE-SET,GoogleFCM_åŸŸ,ğŸ“² GoogleFCM
  - RULE-SET,GoogleFCM_IP,ğŸ“² GoogleFCM,no-resolve

  - RULE-SET,Google_åŸŸ,ğŸ” Google
  - RULE-SET,Google_IP,ğŸ” Google,no-resolve

  # OpenAI
  - RULE-SET,OpenAI_åŸŸ,ğŸ¤– OpenAI
  - RULE-SET,OpenAI_IP,ğŸ¤– OpenAI,no-resolve

  # GitHub
  - RULE-SET,GitHub_åŸŸ,ğŸ™ GitHub

  # Apple
  - RULE-SET,Apple_åŸŸ,ğŸ Apple
  - RULE-SET,Apple_IP,ğŸ Apple,no-resolve

  # Microsoft
  - RULE-SET,Microsoft_åŸŸ,ğŸªŸ Microsoft

  # å±€åŸŸç½‘å’Œä¸­å›½å¤§é™†
  - RULE-SET,Private_åŸŸ,ğŸŒ ç›´è¿
  - RULE-SET,Private_IP,ğŸŒ ç›´è¿,no-resolve

  - RULE-SET,CN_åŸŸ,ğŸŒ ç›´è¿
  - RULE-SET,CN_IP,ğŸŒ ç›´è¿,no-resolve

  # å…œåº•è§„åˆ™
  - GEOIP,CN,ğŸŒ ç›´è¿
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# ==============================================
# é…ç½®æ–‡ä»¶ç»“æŸ
# ==============================================